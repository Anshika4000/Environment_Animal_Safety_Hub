<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>EcoLife Professional Food Waste Tracker</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>

/* RESET */

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:Poppins,sans-serif;
}

body{
background:linear-gradient(135deg,#eef5f0,#dff3e6);
padding:20px;
color:#333;
}

/* HEADER */

.header{
background:linear-gradient(135deg,#27ae60,#2ecc71);
color:white;
padding:25px;
border-radius:12px;
margin-bottom:20px;
box-shadow:0 4px 15px rgba(0,0,0,0.1);
}

.header h1{
font-size:28px;
}

/* DASHBOARD */

.dashboard{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
gap:15px;
margin-bottom:20px;
}

.card{
background:white;
padding:20px;
border-radius:12px;
box-shadow:0 4px 12px rgba(0,0,0,0.08);
transition:0.3s;
}

.card:hover{
transform:translateY(-3px);
}

.stat{
font-size:26px;
font-weight:700;
color:#27ae60;
margin-top:5px;
}

/* FORM */

.form-group{
margin-bottom:12px;
}

input,select{
width:100%;
padding:10px;
border-radius:6px;
border:1px solid #ccc;
}

button{
background:#27ae60;
color:white;
border:none;
padding:10px 15px;
border-radius:6px;
cursor:pointer;
margin-top:5px;
margin-right:5px;
}

button:hover{
background:#219150;
}

/* TABLE */

table{
width:100%;
border-collapse:collapse;
margin-top:10px;
}

th{
background:#27ae60;
color:white;
padding:10px;
}

td{
padding:10px;
border-bottom:1px solid #eee;
}

.delete{
background:#e74c3c;
}

.delete:hover{
background:#c0392b;
}

/* CHART */

.chart-box{
background:white;
padding:20px;
border-radius:12px;
margin-top:20px;
box-shadow:0 4px 12px rgba(0,0,0,0.08);
}

</style>

</head>
<body>

<div class="header">
<h1>EcoLife Food Waste Tracker</h1>
<p>Track waste • Save money • Protect planet</p>
</div>


<div class="dashboard">

<div class="card">
Total Waste
<div class="stat" id="totalWaste">0 kg</div>
</div>

<div class="card">
Money Lost
<div class="stat" id="moneyLost">₹0</div>
</div>

<div class="card">
CO₂ Impact
<div class="stat" id="co2">0 kg</div>
</div>

</div>


<div class="card">

<h3>Add Entry</h3>

<div class="form-group">
<select id="category">
<option>Vegetables</option>
<option>Fruits</option>
<option>Dairy</option>
<option>Meat</option>
<option>Grains</option>
<option>Other</option>
</select>
</div>

<div class="form-group">
<input type="number" id="amount" placeholder="Amount (kg)">
</div>

<div class="form-group">
<input type="date" id="date">
</div>

<button onclick="addEntry()">Add Entry</button>

<button onclick="clearAll()">Clear All</button>

<button onclick="exportCSV()">Export CSV</button>

</div>


<div class="card">

<h3>Entries</h3>

<table>

<thead>
<tr>
<th>Date</th>
<th>Category</th>
<th>Amount</th>
<th>Delete</th>
</tr>
</thead>

<tbody id="table"></tbody>

</table>

</div>


<div class="chart-box">
<canvas id="chart"></canvas>
</div>



<script>

/* STORAGE */

let entries = JSON.parse(localStorage.getItem("foodWaste")) || []


/* COLORS */

function generateColors(count){

let colors=[]

for(let i=0;i<count;i++){

colors.push(`hsl(${i*360/count},70%,50%)`)

}

return colors

}


/* ADD ENTRY */

function addEntry(){

let category = document.getElementById("category").value

let amount = parseFloat(document.getElementById("amount").value)

let date = document.getElementById("date").value

if(!amount || !date){

alert("Please enter valid data")

return

}

entries.push({category,amount,date})

save()

}


/* SAVE */

function save(){

localStorage.setItem("foodWaste",JSON.stringify(entries))

update()

}


/* DELETE */

function deleteEntry(index){

entries.splice(index,1)

save()

}


/* CLEAR */

function clearAll(){

if(confirm("Delete all entries?")){

entries=[]

save()

}

}


/* EXPORT */

function exportCSV(){

let csv="Date,Category,Amount\n"

entries.forEach(e=>{

csv+=`${e.date},${e.category},${e.amount}\n`

})

let blob=new Blob([csv])

let a=document.createElement("a")

a.href=URL.createObjectURL(blob)

a.download="food_waste_data.csv"

a.click()

}


/* UPDATE */

function update(){

let table=document.getElementById("table")

table.innerHTML=""

let total=0

let categoryTotals={}

entries.forEach((e,index)=>{

total+=e.amount

categoryTotals[e.category]=(categoryTotals[e.category]||0)+e.amount

table.innerHTML+=`

<tr>

<td>${e.date}</td>

<td>${e.category}</td>

<td>${e.amount}</td>

<td>

<button class="delete" onclick="deleteEntry(${index})">

Delete

</button>

</td>

</tr>

`

})

document.getElementById("totalWaste").innerText = total.toFixed(2)+" kg"

document.getElementById("moneyLost").innerText = "₹"+(total*200).toFixed(0)

document.getElementById("co2").innerText = (total*2.5).toFixed(1)+" kg"

updateChart(categoryTotals)

}


/* CHART */

let chart=new Chart(document.getElementById("chart"),{

type:"doughnut",

data:{

labels:[],

datasets:[{

data:[],

backgroundColor:[]

}]

},

options:{

responsive:true,

plugins:{

legend:{
position:"bottom"
}

}

}

})


function updateChart(categoryTotals){

let labels = Object.keys(categoryTotals)

let data = Object.values(categoryTotals)

chart.data.labels = labels

chart.data.datasets[0].data = data

chart.data.datasets[0].backgroundColor = generateColors(labels.length)

chart.update()

}


/* INIT */

update()

</script>


</body>
</html>